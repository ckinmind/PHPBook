# 第三章 命令基本格式及文件处理命令
[视频地址：第三章 命令基本格式及文件处理命令](http://www.imooc.com/video/3472)

---
## 3-1 命令格式

**1. linux常用命令不难但是需要记忆，至少需要敲三遍**

**2. 命令分为以下几个大类：**
- 文件处理命令
- 文件搜索命令
- 帮助命令
- 压缩与解压缩命令
- 关机与重启命令
- 其他常用命令

**3. 命令提示符**
```
[root@localhost~]#
其中：
root 当前登录用户
localhost 主机名
~ 当前所在目录
# 超级用户提示符
普通用户提示符是$
```

**4. 每个用户都有'家'**
> 超级用户的家在/root（根目录下一级目录root中）
普通用户的家在/home/user1(举例,home下的二级目录中)

**5. 命令格式：命令 【选项】 【参数】**
>注意：个别命令选项不遵循此格式
当有多个选项是可以写在一起
简化选项与完整选项，比如： -a 等于 --all


**6. 查询目录中内容的命令：ls**
```
ls 【选项】【文件或目录】
选项：
-a 显示所有文件，包括隐藏文件
-l 显示详细信息
-d 查看目录属性
-h 人性化显示文件大小
-i 显示inode
```
**ls -a 多显示隐藏文件夹**
>在linux中.开头的文件代表隐藏文件
>设计隐藏文件的初衷是告诉用户这个是系统文件，最好不要动，所以隐藏


**ls -l 显示详细信息**
```
lrwxrwxrwx   1 root root      7 May  3 13:48 bin -> usr/bin
dr-xr-xr-x   4 root root   4096 May  3 15:44 boot
drwxr-xr-x   5 root root   4096 Jul  9 10:04 data
drwxr-xr-x  19 root root   2900 Aug 18 19:45 dev
drwxr-xr-x  82 root root   4096 Aug 18 21:10 etc
```
>lrwxrwxrwx 第一列代表：权限
1 第二列的数字代表：引用计数
root 第三列代表：所有者（谁是这个文件的主人）
root第四列代表：所属组（root也在这个组里）
7 第五列的数字：代表文件的大小，单位是字节，人性化显示大小用 ls -lh
Aug 18 19:45 第六列的日期代表：最后一次修改时间
bin -> usr/bin 最后一列代表：文件（或目录或软链接） 

**ls -lh 人性化显示文件大小**
```
某个文件的详细信息：

1. 执行:ls -l
dr-xr-xr-x   4 root root   4096 May  3 15:44 boot

2. 执行： ls -lh
dr-xr-xr-x   4 root root 4.0K May  3 15:44 boot

上面显示4096代表4096B，线面的4.0K代表4.0KB
```


**ls -ld**
```
如果执行 ls -l /usr
显示的usr目录下所有文件的详细信息

如果想要显示usr这个目录本身的详细信息，则执行 ls -ld /usr
```

**ls -i**
```
执行: ls -i
262179 bin   2359297 data   266727 etc  
```
>前面的数字代表该该文件的id号，linux通过这个id号（也就是inode号）来判断文件位置

**ll**
>ll是 ls -l 的简写，效果一样

**7. 权限相关**
```
举例比如这个权限：drwxr-xr-x
第一位代表文件类型：-代表文件， d代表目录，l代表软链接文件

后9位以3个为一组分别代表：
rwx: u所有者
r-x: g所属组
r-x: o其他

三个字母代表的意思：
r:读
w:写
x:执行

上面权限的意思是：
u所有者拥有：读，写，执行权限
g所属组拥有：读和执行权限
其他人拥有：读和执行权限
```
>linux中有7种文件类型，除了上面说的三种，还有：块设备文件，字符设备文件，套接字文件，管道文件

----
## 3-2 目录与处理命令（上）

**1. linux中一切皆文件，目录也是文件，称之为目录文件**

**2. 建立目录命令：mkdir**
```
mkdir [-p] [目录名]

-p:递归创建
命令英文原意： make directories
```
举例：
```
// 在当前目录下创建单个目录（该目录没创建过）
mkdir test

//在当前目录下创建多级目录（该多级目录都没被创建过）
mkdir test/test2  //这个时候会报错
mkdir -p test/test2 //这个才正确，递归创建目录

//在已创建目录下再创建一个目录
mkdir test/haha   //test目录已经建立，haha没建立，所以-p可写可不写
```

**3. 切换所在目录命令：cd**
```
cd 【目录】

英文愿意：change directory

简化操作：
cd ~   回到用户家目录,如果是以root身份登录，执行此命令后，回到/root/
       目录下，如果是以其他用户等录得话，则是回到/home/目录下
cd     同上
cd -   进入上次目录
cd ..  进入上一级目录
cd /   进入根目录
cd .   进入当前目录（这条命令其实没有意义）
```

**4. 相对路径和绝对路径**
```
相对路径：参照当前所在目录进行查找
如:[root@localhost ~]# cd ../usr/local/src
注：根目录下有 root目录和usr目录，该命令的意思是先进入root目录的上一级目录也就是根目录然后再进入usr/local/src

绝对路径：从根目录开始指定，一级一级递归查找，在任何目录下都能进入指定目录
如： [root@localhost data]# cd /usr/local/src
注： 不用管当前是处在data目录还是其他什么目录，这里的绝对路径就是 /usr/local/src
```
>推荐初学者打绝对路径

**5. 目录补全/命令补全**
```
1. 比如我要进入根目录下某个目录，但是我忘了那个目录的名字
cd /    //这时单击两次Tab键，就可以得到根目录下所有目录

2. 我只记得目录名字的投几个字母，可用Tab键补全
cd /u   //此时单击一次Tab键，直接补全目录  cd /usr/

/************ 分割线 ***********************/

3. 命名补全
user    //此时单击两次Tab键，会显示所有以user开头的命令，如下
useradd     userdel     usermod     usernetctl  users  

4. 单击一次会自动补全（未必是自己想要的命令，除非只有一个匹配项）

```
>按两下tab会将所有相关命令列出，按一下是自动补全一个（未必是自己想要的命令）
>自动补全意义在于快速输入命令以及判断是否写错，写错按Tab键是不会显示的

**6. 查询所在目录位置命令：pwd**
```
pwd

英文原意：print working directory
```
>作用：显示当前位置

---

## 3-3 目录处理命令（下）

**1. 删除空目录命令：rmdir**
```
rmdir 【目录名】

英文原意： remove empty directories
只能删除空白目录
```
举例：
```
有如下目录结构
test(里面有test2目录)   test3(空目录)
rmdir test    //会报错
rmdir test3   //删除成功
```
>rmdir只能删除空目录，该命令平时用的比较少，rm命令用的比较多

**2. 删除文件或者目录命令：rm**
```
rm -rf 【文件或目录】

英文原意：remove
选项：
-r 删除目录
-f 强制
```
举例:
```
环境： test(空目录)，test2(里面还有test3目录)，abc(设定为是个空文件)

rm test  //会报错，提示你这是个目录，表名不能直接删目录
rm -r test  //可执行，但是删除前会问你是否删除
rm abc   //可执行，直接删除了，abc是个文件不是目录
rm -r test2 //可执行，删除每一层都要询问是否删除

rm -rf test2  //直接删除不询问

rm -rf /    //危险命令，会删除根目录下所以文件，因为/代表根目录
```
>加 -r参数删目录
>实际使用过程中直接 rm -rf 不管文件目录都删除，也不用询问
>上面命令需要小心，删前不询问

**3. 复制命令：cp**
```
cp 【选项】 【原文件或目录】【目标目录】

命名英文愿意：copy
选项：
-r 复制目录
-p 连带文件属性复制
-d 若原文件是链接文件，则赋值链接属性
-a 相当于 -pdr
```
举例：
```
环境： test(空目录)，test2(里面还有test3目录)，abc(设定为是个空文件)

cp test test2 //报错，test是个目录，不加参数无法直接复制目录
cp -r test test2 //可执行，加-r参数可复制目录

cp abc test //可执行，将文件abc移动到test目录
cp abc test2/test4 //原意是想将abc文件移动到test2下然后新建的test4目录中，实际上abc被复制到test2目录中并且改名成了test4,所有

cp -p abc test //-p参数的意义在于能使复制的文件的所有属性和原文件一样，包括文件的创建时间，如果不加-p，则文件创建时间是不一样的

cp -a abc test  //-a相当于 -pdr,复制的文件或者目录或者链接文件和原文件所有属性都一样
```

**4. 剪切或者改名命令： mv**
```
mv 【原文件或者目录】 【目标目录】

英文愿意：move
```
>注意：没有-r参数，可以直接移动文件或者目录

```
环境： test(空目录)，test2(里面还有test3目录)，abc(设定为是个空文件)

mv abc test/   //可执行，将abc文件移动到了test中

cd test
mv abc hehe  //改名，在同一个目录下，abc被改名成hehe

```

## 3-4 常见目录的作用
- Linux是个严谨的操作系统，每个一级目录都是有严格规定的
- 熟悉linux的一个重要点是熟悉这些一级目录，便于知道这些目录的作用

**1. 目录含义**
```
/      根目录
/bin   命令保存目录（普通用户就可以读取的命令）
/boot  启动目录，启动相关文件
/dev   设备文件保存目录
/etc   配置文件保存目录
/home  普通用户的家目录  
/lib   系统库保存目录
/mnt   系统挂载目录
/media 挂载目录  

/root  超级用户家目录
/tmp   临时目录（存放临时数据）
/sbin  命令保存目录（超级用户才能使用目录）
/proc  直接写入内存的
/sys
/usr   系统软件资源目录
   /usr/bin/系统命令（普通用户）
   /usr/sbin/系统命令（超级用户）
/var   系统相关文档内容
```
>1. 根目录下的bin和sbin,usr目录下的bin和sbin，这四个目录都是用来保存系统命令的，不同的是bin中的命令是任何用户都可以执行，但是sbin中保存的是只有超级用户才可以执行的命令
>
>2. root目录是启动目录，保存着一些用户的启动数据，也是不能随便动的
>3. etc目录中保存的是很多配置文件目录，后面学习会多次用到
>4. home是普通用户的家目录，root是超级用户家目录
>5. lib是linux中的函数库保存位置
>6. 所有的存储设备都要挂载之后才能使用，系统准备了mnt，media空目录等来作为你挂载外接存储设备的
>7. proc和sys目录不能直接操作，这两个目录保存的是内存的过载点，这两个的目录的数据是直接写在内存上的，我们无法往这两个目录写数据

## 3-5 链接命令

**1. 链接命令： ln**
```
ln -s 【原文件】 【目标文件】

命令原意：link
功能描述：生成链接文件
选项： -s 创建软链接
```
>链接有软硬之分

**2. 硬链接的特征**
- 拥有相同的i节点和存储block块，可以看作是同一个文件
- 可通过i节点识别
- 不能跨分区
- 不能针对目录使用

**3. 软链接的特征**
- 类似Windows快捷方式
- 软链接拥有自己的i节点和Block块，但是数据块中只保存原文件的文件名和i节点号，并没有实际的文件数据
- 一个常规软链接的属性是：lrwxrwxrwx,第一位l表示是软链接，后9位的文件权限都为rwxrwxrwx
- 删除任意文件，另一个都改变
- 删除原文件，软链接不能使用

**备注**：额外资料介绍 [硬链接与软链接](http://www.ibm.com/developerworks/cn/linux/l-cn-hardandsymb-links/)
